{"ast":null,"code":"import React,{useState,useEffect}from'react';import API from'../api';import{useNavigate,Link}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Login(){const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[loading,setLoading]=useState(false);const[backendStatus,setBackendStatus]=useState('unknown');const nav=useNavigate();// Test backend connection on component mount\nuseEffect(()=>{testBackendConnection();},[]);const testBackendConnection=async()=>{try{console.log('Testing backend connection...');const response=await fetch('http://localhost:5000/api/health');const data=await response.json();setBackendStatus('connected');console.log('‚úÖ Backend connection OK');}catch(error){setBackendStatus('disconnected');console.error('‚ùå Backend connection failed:',error);}};async function submit(e){e.preventDefault();if(backendStatus==='disconnected'){alert('‚ùå Backend server is not running!\\n\\nPlease ensure:\\n1. Backend is running on port 5000\\n2. Run: node server.js in backend folder\\n3. Check the connection using the Test button below');return;}setLoading(true);try{console.log('Attempting login...');console.log('Frontend:',window.location.origin);console.log('Backend: http://localhost:5000');const response=await API.post('/api/auth/login',{email,password});// Save token and user data\nlocalStorage.setItem('token',response.data.token);localStorage.setItem('user',JSON.stringify(response.data.user));console.log('‚úÖ Login successful!');nav('/dashboard');}catch(err){var _err$response,_err$response$data;console.error('Login error:',err);let errorMessage='Login failed';if((_err$response=err.response)!==null&&_err$response!==void 0&&(_err$response$data=_err$response.data)!==null&&_err$response$data!==void 0&&_err$response$data.error){errorMessage=err.response.data.error;}else if(err.message){errorMessage=err.message;}alert(\"Error: \".concat(errorMessage));}finally{setLoading(false);}}return/*#__PURE__*/_jsx(\"div\",{className:\"d-flex align-items-center justify-content-center\",style:{height:'100vh',backgroundColor:'#f5f5f5'},children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,className:\"p-4 shadow\",style:{width:360,background:'#041427',borderRadius:8},children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-3 text-white text-center\",children:\"Sign in\"}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-3 p-2 rounded text-center \".concat(backendStatus==='connected'?'bg-success':backendStatus==='disconnected'?'bg-danger':'bg-warning'),children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-white\",children:[backendStatus==='connected'&&'‚úÖ Backend Connected',backendStatus==='disconnected'&&'‚ùå Backend Not Connected',backendStatus==='unknown'&&'üîÑ Checking Backend...']})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label text-white\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",value:email,onChange:e=>setEmail(e.target.value),type:\"email\",placeholder:\"Enter your email\",required:true,disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label text-white\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"form-control\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"Enter your password\",required:true,disabled:loading})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary w-100 py-2\",type:\"submit\",disabled:loading||backendStatus==='disconnected',children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner-border spinner-border-sm me-2\"}),\"Logging in...\"]}):'Login'}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 text-center\",children:/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"text-white-50 text-decoration-none\",children:\"Create account\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 border-top pt-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-sm btn-outline-info me-2\",onClick:testBackendConnection,children:\"Test Backend\"}),/*#__PURE__*/_jsx(Link,{to:\"/connection-test\",className:\"btn btn-sm btn-outline-warning\",children:\"Detailed Test\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 p-2 bg-dark rounded\",children:/*#__PURE__*/_jsxs(\"small\",{className:\"text-white-50\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Debug:\"}),/*#__PURE__*/_jsx(\"br\",{}),\"Frontend: \",window.location.origin,/*#__PURE__*/_jsx(\"br\",{}),\"Backend: http://localhost:5000\"]})})]})]})});}","map":{"version":3,"names":["React","useState","useEffect","API","useNavigate","Link","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Login","email","setEmail","password","setPassword","loading","setLoading","backendStatus","setBackendStatus","nav","testBackendConnection","console","log","response","fetch","data","json","error","submit","e","preventDefault","alert","window","location","origin","post","localStorage","setItem","token","JSON","stringify","user","err","_err$response","_err$response$data","errorMessage","message","concat","className","style","height","backgroundColor","children","onSubmit","width","background","borderRadius","value","onChange","target","type","placeholder","required","disabled","to","onClick"],"sources":["C:/Users/DEll/Pictures/gunna/frontend/src/components/Login.js"],"sourcesContent":["import React, {useState, useEffect} from 'react';\nimport API from '../api';\nimport { useNavigate, Link } from 'react-router-dom';\n\nexport default function Login(){\n  const [email,setEmail]=useState('');\n  const [password,setPassword]=useState('');\n  const [loading, setLoading] = useState(false);\n  const [backendStatus, setBackendStatus] = useState('unknown');\n  const nav = useNavigate();\n\n  // Test backend connection on component mount\n  useEffect(() => {\n    testBackendConnection();\n  }, []);\n\n  const testBackendConnection = async () => {\n    try {\n      console.log('Testing backend connection...');\n      const response = await fetch('http://localhost:5000/api/health');\n      const data = await response.json();\n      setBackendStatus('connected');\n      console.log('‚úÖ Backend connection OK');\n    } catch (error) {\n      setBackendStatus('disconnected');\n      console.error('‚ùå Backend connection failed:', error);\n    }\n  };\n\n  async function submit(e){\n    e.preventDefault();\n    \n    if (backendStatus === 'disconnected') {\n      alert('‚ùå Backend server is not running!\\n\\nPlease ensure:\\n1. Backend is running on port 5000\\n2. Run: node server.js in backend folder\\n3. Check the connection using the Test button below');\n      return;\n    }\n    \n    setLoading(true);\n    \n    try {\n      console.log('Attempting login...');\n      console.log('Frontend:', window.location.origin);\n      console.log('Backend: http://localhost:5000');\n      \n      const response = await API.post('/api/auth/login', { email, password });\n      \n      // Save token and user data\n      localStorage.setItem('token', response.data.token);\n      localStorage.setItem('user', JSON.stringify(response.data.user));\n      \n      console.log('‚úÖ Login successful!');\n      nav('/dashboard');\n      \n    } catch (err){\n      console.error('Login error:', err);\n      \n      let errorMessage = 'Login failed';\n      \n      if (err.response?.data?.error) {\n        errorMessage = err.response.data.error;\n      } else if (err.message) {\n        errorMessage = err.message;\n      }\n      \n      alert(`Error: ${errorMessage}`);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <div className=\"d-flex align-items-center justify-content-center\" style={{height:'100vh', backgroundColor: '#f5f5f5'}}>\n      <form onSubmit={submit} className=\"p-4 shadow\" style={{width:360, background:'#041427', borderRadius:8}}>\n        <h3 className=\"mb-3 text-white text-center\">Sign in</h3>\n        \n        {/* Backend Status Indicator */}\n        <div className={`mb-3 p-2 rounded text-center ${\n          backendStatus === 'connected' ? 'bg-success' : \n          backendStatus === 'disconnected' ? 'bg-danger' : 'bg-warning'\n        }`}>\n          <small className=\"text-white\">\n            {backendStatus === 'connected' && '‚úÖ Backend Connected'}\n            {backendStatus === 'disconnected' && '‚ùå Backend Not Connected'}\n            {backendStatus === 'unknown' && 'üîÑ Checking Backend...'}\n          </small>\n        </div>\n        \n        <div className=\"mb-2\">\n          <label className=\"form-label text-white\">Email</label>\n          <input \n            className=\"form-control\" \n            value={email} \n            onChange={e=>setEmail(e.target.value)}\n            type=\"email\"\n            placeholder=\"Enter your email\"\n            required\n            disabled={loading}\n          />\n        </div>\n        \n        <div className=\"mb-3\">\n          <label className=\"form-label text-white\">Password</label>\n          <input \n            type=\"password\" \n            className=\"form-control\" \n            value={password} \n            onChange={e=>setPassword(e.target.value)}\n            placeholder=\"Enter your password\"\n            required\n            disabled={loading}\n          />\n        </div>\n        \n        <button \n          className=\"btn btn-primary w-100 py-2\" \n          type=\"submit\"\n          disabled={loading || backendStatus === 'disconnected'}\n        >\n          {loading ? (\n            <>\n              <span className=\"spinner-border spinner-border-sm me-2\"></span>\n              Logging in...\n            </>\n          ) : (\n            'Login'\n          )}\n        </button>\n        \n        <div className=\"mt-3 text-center\">\n          <Link to=\"/register\" className=\"text-white-50 text-decoration-none\">\n            Create account\n          </Link>\n        </div>\n\n        {/* Connection Test Buttons */}\n        <div className=\"mt-3 border-top pt-3\">\n          <div className=\"text-center\">\n            <button \n              type=\"button\"\n              className=\"btn btn-sm btn-outline-info me-2\"\n              onClick={testBackendConnection}\n            >\n              Test Backend\n            </button>\n            <Link to=\"/connection-test\" className=\"btn btn-sm btn-outline-warning\">\n              Detailed Test\n            </Link>\n          </div>\n          \n          {/* Debug Info */}\n          <div className=\"mt-2 p-2 bg-dark rounded\">\n            <small className=\"text-white-50\">\n              <strong>Debug:</strong><br/>\n              Frontend: {window.location.origin}<br/>\n              Backend: http://localhost:5000\n            </small>\n          </div>\n        </div>\n      </form>\n    </div>\n  );\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,QAAQ,CAAEC,SAAS,KAAO,OAAO,CAChD,MAAO,CAAAC,GAAG,KAAM,QAAQ,CACxB,OAASC,WAAW,CAAEC,IAAI,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAErD,cAAe,SAAS,CAAAC,KAAKA,CAAA,CAAE,CAC7B,KAAM,CAACC,KAAK,CAACC,QAAQ,CAAC,CAACb,QAAQ,CAAC,EAAE,CAAC,CACnC,KAAM,CAACc,QAAQ,CAACC,WAAW,CAAC,CAACf,QAAQ,CAAC,EAAE,CAAC,CACzC,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAACkB,aAAa,CAAEC,gBAAgB,CAAC,CAAGnB,QAAQ,CAAC,SAAS,CAAC,CAC7D,KAAM,CAAAoB,GAAG,CAAGjB,WAAW,CAAC,CAAC,CAEzB;AACAF,SAAS,CAAC,IAAM,CACdoB,qBAAqB,CAAC,CAAC,CACzB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAA,qBAAqB,CAAG,KAAAA,CAAA,GAAY,CACxC,GAAI,CACFC,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC,CAC5C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,kCAAkC,CAAC,CAChE,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAF,QAAQ,CAACG,IAAI,CAAC,CAAC,CAClCR,gBAAgB,CAAC,WAAW,CAAC,CAC7BG,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC,CACxC,CAAE,MAAOK,KAAK,CAAE,CACdT,gBAAgB,CAAC,cAAc,CAAC,CAChCG,OAAO,CAACM,KAAK,CAAC,8BAA8B,CAAEA,KAAK,CAAC,CACtD,CACF,CAAC,CAED,cAAe,CAAAC,MAAMA,CAACC,CAAC,CAAC,CACtBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAElB,GAAIb,aAAa,GAAK,cAAc,CAAE,CACpCc,KAAK,CAAC,uLAAuL,CAAC,CAC9L,OACF,CAEAf,UAAU,CAAC,IAAI,CAAC,CAEhB,GAAI,CACFK,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC,CAClCD,OAAO,CAACC,GAAG,CAAC,WAAW,CAAEU,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAChDb,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC,CAE7C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAtB,GAAG,CAACkC,IAAI,CAAC,iBAAiB,CAAE,CAAExB,KAAK,CAAEE,QAAS,CAAC,CAAC,CAEvE;AACAuB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEd,QAAQ,CAACE,IAAI,CAACa,KAAK,CAAC,CAClDF,YAAY,CAACC,OAAO,CAAC,MAAM,CAAEE,IAAI,CAACC,SAAS,CAACjB,QAAQ,CAACE,IAAI,CAACgB,IAAI,CAAC,CAAC,CAEhEpB,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC,CAClCH,GAAG,CAAC,YAAY,CAAC,CAEnB,CAAE,MAAOuB,GAAG,CAAC,KAAAC,aAAA,CAAAC,kBAAA,CACXvB,OAAO,CAACM,KAAK,CAAC,cAAc,CAAEe,GAAG,CAAC,CAElC,GAAI,CAAAG,YAAY,CAAG,cAAc,CAEjC,IAAAF,aAAA,CAAID,GAAG,CAACnB,QAAQ,UAAAoB,aAAA,YAAAC,kBAAA,CAAZD,aAAA,CAAclB,IAAI,UAAAmB,kBAAA,WAAlBA,kBAAA,CAAoBjB,KAAK,CAAE,CAC7BkB,YAAY,CAAGH,GAAG,CAACnB,QAAQ,CAACE,IAAI,CAACE,KAAK,CACxC,CAAC,IAAM,IAAIe,GAAG,CAACI,OAAO,CAAE,CACtBD,YAAY,CAAGH,GAAG,CAACI,OAAO,CAC5B,CAEAf,KAAK,WAAAgB,MAAA,CAAWF,YAAY,CAAE,CAAC,CACjC,CAAC,OAAS,CACR7B,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAEA,mBACEX,IAAA,QAAK2C,SAAS,CAAC,kDAAkD,CAACC,KAAK,CAAE,CAACC,MAAM,CAAC,OAAO,CAAEC,eAAe,CAAE,SAAS,CAAE,CAAAC,QAAA,cACpH7C,KAAA,SAAM8C,QAAQ,CAAEzB,MAAO,CAACoB,SAAS,CAAC,YAAY,CAACC,KAAK,CAAE,CAACK,KAAK,CAAC,GAAG,CAAEC,UAAU,CAAC,SAAS,CAAEC,YAAY,CAAC,CAAC,CAAE,CAAAJ,QAAA,eACtG/C,IAAA,OAAI2C,SAAS,CAAC,6BAA6B,CAAAI,QAAA,CAAC,SAAO,CAAI,CAAC,cAGxD/C,IAAA,QAAK2C,SAAS,iCAAAD,MAAA,CACZ9B,aAAa,GAAK,WAAW,CAAG,YAAY,CAC5CA,aAAa,GAAK,cAAc,CAAG,WAAW,CAAG,YAAY,CAC5D,CAAAmC,QAAA,cACD7C,KAAA,UAAOyC,SAAS,CAAC,YAAY,CAAAI,QAAA,EAC1BnC,aAAa,GAAK,WAAW,EAAI,qBAAqB,CACtDA,aAAa,GAAK,cAAc,EAAI,yBAAyB,CAC7DA,aAAa,GAAK,SAAS,EAAI,wBAAwB,EACnD,CAAC,CACL,CAAC,cAENV,KAAA,QAAKyC,SAAS,CAAC,MAAM,CAAAI,QAAA,eACnB/C,IAAA,UAAO2C,SAAS,CAAC,uBAAuB,CAAAI,QAAA,CAAC,OAAK,CAAO,CAAC,cACtD/C,IAAA,UACE2C,SAAS,CAAC,cAAc,CACxBS,KAAK,CAAE9C,KAAM,CACb+C,QAAQ,CAAE7B,CAAC,EAAEjB,QAAQ,CAACiB,CAAC,CAAC8B,MAAM,CAACF,KAAK,CAAE,CACtCG,IAAI,CAAC,OAAO,CACZC,WAAW,CAAC,kBAAkB,CAC9BC,QAAQ,MACRC,QAAQ,CAAEhD,OAAQ,CACnB,CAAC,EACC,CAAC,cAENR,KAAA,QAAKyC,SAAS,CAAC,MAAM,CAAAI,QAAA,eACnB/C,IAAA,UAAO2C,SAAS,CAAC,uBAAuB,CAAAI,QAAA,CAAC,UAAQ,CAAO,CAAC,cACzD/C,IAAA,UACEuD,IAAI,CAAC,UAAU,CACfZ,SAAS,CAAC,cAAc,CACxBS,KAAK,CAAE5C,QAAS,CAChB6C,QAAQ,CAAE7B,CAAC,EAAEf,WAAW,CAACe,CAAC,CAAC8B,MAAM,CAACF,KAAK,CAAE,CACzCI,WAAW,CAAC,qBAAqB,CACjCC,QAAQ,MACRC,QAAQ,CAAEhD,OAAQ,CACnB,CAAC,EACC,CAAC,cAENV,IAAA,WACE2C,SAAS,CAAC,4BAA4B,CACtCY,IAAI,CAAC,QAAQ,CACbG,QAAQ,CAAEhD,OAAO,EAAIE,aAAa,GAAK,cAAe,CAAAmC,QAAA,CAErDrC,OAAO,cACNR,KAAA,CAAAE,SAAA,EAAA2C,QAAA,eACE/C,IAAA,SAAM2C,SAAS,CAAC,uCAAuC,CAAO,CAAC,gBAEjE,EAAE,CAAC,CAEH,OACD,CACK,CAAC,cAET3C,IAAA,QAAK2C,SAAS,CAAC,kBAAkB,CAAAI,QAAA,cAC/B/C,IAAA,CAACF,IAAI,EAAC6D,EAAE,CAAC,WAAW,CAAChB,SAAS,CAAC,oCAAoC,CAAAI,QAAA,CAAC,gBAEpE,CAAM,CAAC,CACJ,CAAC,cAGN7C,KAAA,QAAKyC,SAAS,CAAC,sBAAsB,CAAAI,QAAA,eACnC7C,KAAA,QAAKyC,SAAS,CAAC,aAAa,CAAAI,QAAA,eAC1B/C,IAAA,WACEuD,IAAI,CAAC,QAAQ,CACbZ,SAAS,CAAC,kCAAkC,CAC5CiB,OAAO,CAAE7C,qBAAsB,CAAAgC,QAAA,CAChC,cAED,CAAQ,CAAC,cACT/C,IAAA,CAACF,IAAI,EAAC6D,EAAE,CAAC,kBAAkB,CAAChB,SAAS,CAAC,gCAAgC,CAAAI,QAAA,CAAC,eAEvE,CAAM,CAAC,EACJ,CAAC,cAGN/C,IAAA,QAAK2C,SAAS,CAAC,0BAA0B,CAAAI,QAAA,cACvC7C,KAAA,UAAOyC,SAAS,CAAC,eAAe,CAAAI,QAAA,eAC9B/C,IAAA,WAAA+C,QAAA,CAAQ,QAAM,CAAQ,CAAC,cAAA/C,IAAA,QAAI,CAAC,aAClB,CAAC2B,MAAM,CAACC,QAAQ,CAACC,MAAM,cAAC7B,IAAA,QAAI,CAAC,iCAEzC,EAAO,CAAC,CACL,CAAC,EACH,CAAC,EACF,CAAC,CACJ,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}