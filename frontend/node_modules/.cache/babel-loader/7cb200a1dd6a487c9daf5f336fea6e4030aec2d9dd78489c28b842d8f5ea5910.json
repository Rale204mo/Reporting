{"ast":null,"code":"import React from'react';import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";const ReportsSection=_ref=>{let{reports,loading,user,setShowAddForm,fetchReports,downloadExcel,handleEditReport,handleDeleteReport,canCreateReport,canViewAllReports,canEditDelete}=_ref;return/*#__PURE__*/_jsxs(\"div\",{className:\"card p-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-3\",children:[/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-0\",children:[(user===null||user===void 0?void 0:user.role)==='student'?'Available Reports':'All Class Reports',(user===null||user===void 0?void 0:user.role)==='lecturer'&&' (My Reports)']}),/*#__PURE__*/_jsxs(\"div\",{children:[canCreateReport&&/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success btn-sm me-2\",onClick:()=>setShowAddForm(true),children:\"+ Add New Report\"}),canViewAllReports&&/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-excel btn-sm me-2\",onClick:downloadExcel,disabled:reports.length===0,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-file-excel me-1\"}),\"Export All\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary btn-sm\",onClick:fetchReports,disabled:loading,children:loading?'Refreshing...':'Refresh'})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-dark table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Course\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Code\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Lecturer\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Class\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Attendance\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Week\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:loading?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{colSpan:\"9\",className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border spinner-border-sm me-2\"}),\"Loading reports...\"]})}):reports.length===0?/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsxs(\"td\",{colSpan:\"9\",className:\"text-center text-muted py-4\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"No reports found.\"}),/*#__PURE__*/_jsx(\"small\",{children:(user===null||user===void 0?void 0:user.role)==='student'?'No reports available for viewing.':'Click \"Add New Report\" to create your first report'})]})}):reports.map((report,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:index+1}),/*#__PURE__*/_jsx(\"td\",{children:report.coursename||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:report.coursecode||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:report.lecturer||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:report.class_name||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"badge bg-info\",children:[report.present||0,\"/\",report.registered||0]})}),/*#__PURE__*/_jsx(\"td\",{children:report.week_of_reporting||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:report.date_of_lecture?new Date(report.date_of_lecture).toLocaleDateString():'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group\",role:\"group\",children:[canEditDelete(report)&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-warning btn-sm me-1\",onClick:()=>handleEditReport(report),title:\"Edit Report\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger btn-sm me-1\",onClick:()=>handleDeleteReport(report.id,report),title:\"Delete Report\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info btn-sm\",onClick:()=>{alert(\"Report Details:\\nCourse: \".concat(report.coursename,\"\\nLecturer: \").concat(report.lecturer,\"\\nTopic: \").concat(report.topic_taught));},title:\"View Details\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-eye\"})})]})})]},report.id))})]})})]});};export default ReportsSection;","map":{"version":3,"names":["React","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","ReportsSection","_ref","reports","loading","user","setShowAddForm","fetchReports","downloadExcel","handleEditReport","handleDeleteReport","canCreateReport","canViewAllReports","canEditDelete","className","children","role","onClick","disabled","length","colSpan","map","report","index","coursename","coursecode","lecturer","class_name","present","registered","week_of_reporting","date_of_lecture","Date","toLocaleDateString","title","id","alert","concat","topic_taught"],"sources":["C:/Users/DEll/Pictures/gunna/frontend/src/components/Sections/ReportsSection.js"],"sourcesContent":["import React from 'react';\n\nconst ReportsSection = ({ \n  reports, \n  loading, \n  user, \n  setShowAddForm, \n  fetchReports, \n  downloadExcel, \n  handleEditReport, \n  handleDeleteReport, \n  canCreateReport, \n  canViewAllReports, \n  canEditDelete \n}) => {\n  return (\n    <div className=\"card p-3\">\n      <div className=\"d-flex justify-content-between align-items-center mb-3\">\n        <h5 className=\"mb-0\">\n          {user?.role === 'student' ? 'Available Reports' : 'All Class Reports'}\n          {user?.role === 'lecturer' && ' (My Reports)'}\n        </h5>\n        <div>\n          {canCreateReport && (\n            <button \n              className=\"btn btn-success btn-sm me-2\"\n              onClick={() => setShowAddForm(true)}\n            >\n              + Add New Report\n            </button>\n          )}\n          {canViewAllReports && (\n            <button \n              className=\"btn btn-excel btn-sm me-2\"\n              onClick={downloadExcel}\n              disabled={reports.length === 0}\n            >\n              <i className=\"fas fa-file-excel me-1\"></i>Export All\n            </button>\n          )}\n          <button \n            className=\"btn btn-primary btn-sm\"\n            onClick={fetchReports}\n            disabled={loading}\n          >\n            {loading ? 'Refreshing...' : 'Refresh'}\n          </button>\n        </div>\n      </div>\n      \n      <div className=\"table-responsive\">\n        <table className=\"table table-dark table-striped\">\n          <thead>\n            <tr>\n              <th>#</th>\n              <th>Course</th>\n              <th>Code</th>\n              <th>Lecturer</th>\n              <th>Class</th>\n              <th>Attendance</th>\n              <th>Week</th>\n              <th>Date</th>\n              <th>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {loading ? (\n              <tr>\n                <td colSpan=\"9\" className=\"text-center\">\n                  <div className=\"spinner-border spinner-border-sm me-2\"></div>\n                  Loading reports...\n                </td>\n              </tr>\n            ) : reports.length === 0 ? (\n              <tr>\n                <td colSpan=\"9\" className=\"text-center text-muted py-4\">\n                  <div>No reports found.</div>\n                  <small>\n                    {user?.role === 'student' \n                      ? 'No reports available for viewing.' \n                      : 'Click \"Add New Report\" to create your first report'\n                    }\n                  </small>\n                </td>\n              </tr>\n            ) : (\n              reports.map((report, index) => (\n                <tr key={report.id}>\n                  <td>{index + 1}</td>\n                  <td>{report.coursename || 'N/A'}</td>\n                  <td>{report.coursecode || 'N/A'}</td>\n                  <td>{report.lecturer || 'N/A'}</td>\n                  <td>{report.class_name || 'N/A'}</td>\n                  <td>\n                    <span className=\"badge bg-info\">\n                      {report.present || 0}/{report.registered || 0}\n                    </span>\n                  </td>\n                  <td>{report.week_of_reporting || 'N/A'}</td>\n                  <td>\n                    {report.date_of_lecture ? \n                      new Date(report.date_of_lecture).toLocaleDateString() : 'N/A'\n                    }\n                  </td>\n                  <td>\n                    <div className=\"btn-group\" role=\"group\">\n                      {canEditDelete(report) && (\n                        <>\n                          <button \n                            className=\"btn btn-warning btn-sm me-1\"\n                            onClick={() => handleEditReport(report)}\n                            title=\"Edit Report\"\n                          >\n                            <i className=\"fas fa-edit\"></i>\n                          </button>\n                          <button \n                            className=\"btn btn-danger btn-sm me-1\"\n                            onClick={() => handleDeleteReport(report.id, report)}\n                            title=\"Delete Report\"\n                          >\n                            <i className=\"fas fa-trash\"></i>\n                          </button>\n                        </>\n                      )}\n                      <button \n                        className=\"btn btn-info btn-sm\"\n                        onClick={() => {\n                          alert(`Report Details:\\nCourse: ${report.coursename}\\nLecturer: ${report.lecturer}\\nTopic: ${report.topic_taught}`);\n                        }}\n                        title=\"View Details\"\n                      >\n                        <i className=\"fas fa-eye\"></i>\n                      </button>\n                    </div>\n                  </td>\n                </tr>\n              ))\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nexport default ReportsSection;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}